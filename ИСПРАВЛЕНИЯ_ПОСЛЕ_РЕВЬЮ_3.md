# üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø–æ—Å–ª–µ —Ä–µ–≤—å—é 3 - –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–¥–∞ –∏ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π

## üìã –û–±–∑–æ—Ä –∏–∑–º–µ–Ω–µ–Ω–∏–π

–í —Ö–æ–¥–µ —Ç—Ä–µ—Ç—å–µ–≥–æ —Ä–µ–≤—å—é –±—ã–ª–∏ –≤—ã—è–≤–ª–µ–Ω—ã –ø—Ä–æ–±–ª–µ–º—ã —Å–æ —Å—Ç—Ä—É–∫—Ç—É—Ä–æ–π –∫–æ–¥–∞ –∏ —Å–æ–¥–µ—Ä–∂–∏–º—ã–º —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è. –í—Å–µ –∑–∞–º–µ—á–∞–Ω–∏—è –±—ã–ª–∏ —É—Å–ø–µ—à–Ω–æ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã.

## ‚ùå –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### 1. –õ–∏—à–Ω–∏–µ —Ñ–∞–π–ª—ã –≤ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–∏
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–∞–ø–∫–∞ `collected_static` –∏ –∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è –≤ `media/` –∑–∞–≥—Ä—É–∂–∞–ª–∏—Å—å –≤ git, —á—Ç–æ —É–≤–µ–ª–∏—á–∏–≤–∞–µ—Ç —Ä–∞–∑–º–µ—Ä —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è.

**–†–µ—à–µ–Ω–∏–µ**: 
- –£–¥–∞–ª–µ–Ω—ã –ø–∞–ø–∫–∏ `backend_real/collected_static/` –∏ `backend_real/media/`
- –î–æ–±–∞–≤–ª–µ–Ω—ã —Å–æ–æ—Ç–≤–µ—Ç—Å—Ç–≤—É—é—â–∏–µ –∑–∞–ø–∏—Å–∏ –≤ `.gitignore`

### 2. –ù–µ–ø—Ä–∞–≤–∏–ª—å–Ω–æ–µ —Ä–∞–∑–º–µ—â–µ–Ω–∏–µ –º–µ–Ω–µ–¥–∂–µ—Ä–∞
**–ü—Ä–æ–±–ª–µ–º–∞**: `UserAccountManager` –Ω–∞—Ö–æ–¥–∏–ª—Å—è –≤ —Ñ–∞–π–ª–µ `users/models.py` –≤–º–µ—Å—Ç–æ –æ—Ç–¥–µ–ª—å–Ω–æ–≥–æ —Ñ–∞–π–ª–∞.

**–†–µ—à–µ–Ω–∏–µ**: 
- –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `backend_real/users/managers.py`
- –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω `UserAccountManager` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤ `users/models.py`

### 3. QuerySet –∫–ª–∞—Å—Å—ã –≤ —Ñ–∞–π–ª–µ managers.py
**–ü—Ä–æ–±–ª–µ–º–∞**: `IngredientQuerySet` –∏ `RecipeQuerySet` –Ω–∞—Ö–æ–¥–∏–ª–∏—Å—å –≤ `recipes/managers.py`, —Ö–æ—Ç—è —ç—Ç–æ –Ω–µ –º–µ–Ω–µ–¥–∂–µ—Ä—ã.

**–†–µ—à–µ–Ω–∏–µ**:
- –°–æ–∑–¥–∞–Ω —Ñ–∞–π–ª `backend_real/recipes/querysets.py` —Å –≥–æ–≤–æ—Ä—è—â–∏–º –∏–º–µ–Ω–µ–º
- –ü–µ—Ä–µ–Ω–µ—Å–µ–Ω—ã –≤—Å–µ QuerySet –∫–ª–∞—Å—Å—ã –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª
- –û–±–Ω–æ–≤–ª–µ–Ω—ã –∏–º–ø–æ—Ä—Ç—ã –≤ `recipes/managers.py`

### 4. –õ–∏—à–Ω–∏–µ –ø–æ–ª—è –≤ –º–æ–¥–µ–ª–∏ Recipe
**–ü—Ä–æ–±–ª–µ–º–∞**: –ü–æ–ª—è `favorited_by` –∏ `in_shopping_carts` –±—ã–ª–∏ –∏–∑–±—ã—Ç–æ—á–Ω—ã–º–∏, —Ç–∞–∫ –∫–∞–∫ —Å–≤—è–∑–∏ —É–∂–µ —Ä–µ–∞–ª–∏–∑–æ–≤–∞–Ω—ã —á–µ—Ä–µ–∑ –ø—Ä–æ–º–µ–∂—É—Ç–æ—á–Ω—ã–µ –º–æ–¥–µ–ª–∏.

**–†–µ—à–µ–Ω–∏–µ**:
- –£–¥–∞–ª–µ–Ω—ã –ø–æ–ª—è `favorited_by` –∏ `in_shopping_carts` –∏–∑ –º–æ–¥–µ–ª–∏ `Recipe`
- –û–±–Ω–æ–≤–ª–µ–Ω—ã QuerySet –º–µ—Ç–æ–¥—ã –¥–ª—è –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è –ø—Ä—è–º—ã—Ö —Å—Å—ã–ª–æ–∫ –Ω–∞ –º–æ–¥–µ–ª–∏ `Favorite` –∏ `ShoppingCart`

## üõ†Ô∏è –î–µ—Ç–∞–ª—å–Ω—ã–µ –∏–∑–º–µ–Ω–µ–Ω–∏—è

### 1. –û—á–∏—Å—Ç–∫–∞ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è
**–§–∞–π–ª**: `.gitignore`

**–î–æ–±–∞–≤–ª–µ–Ω—ã –∑–∞–ø–∏—Å–∏**:
```gitignore
collected_static/
backend_real/collected_static/
backend_real/media/
```

**–£–¥–∞–ª–µ–Ω–Ω—ã–µ –ø–∞–ø–∫–∏**:
- `backend_real/collected_static/` - —Å—Ç–∞—Ç–∏—á–µ—Å–∫–∏–µ —Ñ–∞–π–ª—ã Django
- `backend_real/media/` - –∑–∞–≥—Ä—É–∂–µ–Ω–Ω—ã–µ –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è–º–∏ —Ñ–∞–π–ª—ã (–∏–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è)

### 2. –°–æ–∑–¥–∞–Ω–∏–µ users/managers.py
**–§–∞–π–ª**: `backend_real/users/managers.py`

**–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã–π –∫–ª–∞—Å—Å**:
```python
class UserAccountManager(BaseUserManager):
    """Custom manager for User model with email-based authentication."""
    
    def create_user(self, email, password=None, **extra_fields):
        # ... implementation
    
    def create_superuser(self, email, password=None, **extra_fields):
        # ... implementation
    
    def active_users(self):
        # ... implementation
    
    def with_recipes(self):
        # ... implementation
```

### 3. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ users/models.py
**–§–∞–π–ª**: `backend_real/users/models.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –£–¥–∞–ª–µ–Ω –∫–ª–∞—Å—Å `UserAccountManager`
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç: `from .managers import UserAccountManager`
- –£–±—Ä–∞–Ω –∏–º–ø–æ—Ä—Ç `BaseUserManager`

### 4. –°–æ–∑–¥–∞–Ω–∏–µ recipes/querysets.py
**–§–∞–π–ª**: `backend_real/recipes/querysets.py`

**–ü–µ—Ä–µ–Ω–µ—Å–µ–Ω–Ω—ã–µ –∫–ª–∞—Å—Å—ã**:
```python
class IngredientQuerySet(models.QuerySet):
    """Custom QuerySet for Ingredient model."""
    # ... methods

class RecipeQuerySet(models.QuerySet):
    """Custom QuerySet for Recipe model."""
    # ... methods
```

### 5. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ recipes/managers.py
**–§–∞–π–ª**: `backend_real/recipes/managers.py`

**–ò–∑–º–µ–Ω–µ–Ω–∏—è**:
- –£–¥–∞–ª–µ–Ω—ã –∫–ª–∞—Å—Å—ã `IngredientQuerySet` –∏ `RecipeQuerySet`
- –î–æ–±–∞–≤–ª–µ–Ω –∏–º–ø–æ—Ä—Ç: `from .querysets import IngredientQuerySet, RecipeQuerySet`
- –£–±—Ä–∞–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã `Count`, `Exists`, `OuterRef`, `QUICK_RECIPE_TIME_LIMIT`

### 6. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ recipes/models.py
**–§–∞–π–ª**: `backend_real/recipes/models.py`

**–£–¥–∞–ª–µ–Ω–Ω—ã–µ –ø–æ–ª—è**:
```python
# –£–¥–∞–ª–µ–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–ª—è
favorited_by = models.ManyToManyField(...)
in_shopping_carts = models.ManyToManyField(...)
```

### 7. –û–±–Ω–æ–≤–ª–µ–Ω–∏–µ recipes/querysets.py
**–§–∞–π–ª**: `backend_real/recipes/querysets.py`

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω—ã –º–µ—Ç–æ–¥—ã**:
```python
def with_is_favorited(self, user):
    # –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –º–æ–¥–µ–ª—å Favorite
    from .models import Favorite
    return self.annotate(
        is_favorited=Exists(
            Favorite.objects.filter(recipe=OuterRef('pk'), user=user)
        )
    )

def with_is_in_shopping_cart(self, user):
    # –¢–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä—è–º—É—é —Å—Å—ã–ª–∫—É –Ω–∞ –º–æ–¥–µ–ª—å ShoppingCart
    from .models import ShoppingCart
    return self.annotate(
        is_in_shopping_cart=Exists(
            ShoppingCart.objects.filter(recipe=OuterRef('pk'), user=user)
        )
    )
```

## üß™ –†–µ–∑—É–ª—å—Ç–∞—Ç—ã —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è

### –ü—Ä–æ–≤–µ—Ä–∫–∏ —Å–∏—Å—Ç–µ–º—ã:
- ‚úÖ `python manage.py check` - –ù–∏–∫–∞–∫–∏—Ö –ø—Ä–æ–±–ª–µ–º –Ω–µ –≤—ã—è–≤–ª–µ–Ω–æ
- ‚úÖ `python manage.py test` - –í—Å–µ 12 —Ç–µ—Å—Ç–æ–≤ –ø—Ä–æ—Ö–æ–¥—è—Ç —É—Å–ø–µ—à–Ω–æ

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ —Ñ–∞–π–ª–æ–≤:
```
backend_real/
‚îú‚îÄ‚îÄ users/
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # –¢–æ–ª—å–∫–æ –º–æ–¥–µ–ª–∏
‚îÇ   ‚îî‚îÄ‚îÄ managers.py        # –ú–µ–Ω–µ–¥–∂–µ—Ä—ã –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π
‚îú‚îÄ‚îÄ recipes/
‚îÇ   ‚îú‚îÄ‚îÄ models.py          # –¢–æ–ª—å–∫–æ –º–æ–¥–µ–ª–∏ (–±–µ–∑ –ª–∏—à–Ω–∏—Ö M2M –ø–æ–ª–µ–π)
‚îÇ   ‚îú‚îÄ‚îÄ managers.py        # –¢–æ–ª—å–∫–æ –º–µ–Ω–µ–¥–∂–µ—Ä—ã
‚îÇ   ‚îî‚îÄ‚îÄ querysets.py       # –¢–æ–ª—å–∫–æ QuerySet –∫–ª–∞—Å—Å—ã
‚îî‚îÄ‚îÄ .gitignore             # –û–±–Ω–æ–≤–ª–µ–Ω –¥–ª—è –∏—Å–∫–ª—é—á–µ–Ω–∏—è –Ω–µ–Ω—É–∂–Ω—ã—Ö —Ñ–∞–π–ª–æ–≤
```

## üéØ –ò—Ç–æ–≥–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ

### ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è:
1. **–ü–∞–ø–∫–∞ collected_static —É–±—Ä–∞–Ω–∞** –∏ –¥–æ–±–∞–≤–ª–µ–Ω–∞ –≤ .gitignore
2. **–ò–∑–æ–±—Ä–∞–∂–µ–Ω–∏—è —É–±—Ä–∞–Ω—ã** –∏–∑ —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏—è –∏ –¥–æ–±–∞–≤–ª–µ–Ω—ã –≤ .gitignore  
3. **UserAccountManager –≤—ã–Ω–µ—Å–µ–Ω** –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ñ–∞–π–ª `users/managers.py`
4. **QuerySet –∫–ª–∞—Å—Å—ã –≤—ã–Ω–µ—Å–µ–Ω—ã** –≤ —Ñ–∞–π–ª —Å –≥–æ–≤–æ—Ä—è—â–∏–º –∏–º–µ–Ω–µ–º `recipes/querysets.py`
5. **–õ–∏—à–Ω–∏–µ M2M –ø–æ–ª—è —É–¥–∞–ª–µ–Ω—ã** –∏–∑ –º–æ–¥–µ–ª–∏ Recipe

### ‚úÖ –£–ª—É—á—à–µ–Ω–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä—ã –∫–æ–¥–∞:
- **–†–∞–∑–¥–µ–ª–µ–Ω–∏–µ –æ—Ç–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ—Å—Ç–∏**: –ú–æ–¥–µ–ª–∏, –º–µ–Ω–µ–¥–∂–µ—Ä—ã –∏ QuerySet –≤ –æ—Ç–¥–µ–ª—å–Ω—ã—Ö —Ñ–∞–π–ª–∞—Ö
- **–ß–∏—Å—Ç—ã–π —Ä–µ–ø–æ–∑–∏—Ç–æ—Ä–∏–π**: –£–±—Ä–∞–Ω—ã —Å–≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã –∏ –º–µ–¥–∏–∞
- **–ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∞—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞**: –ö–∞–∂–¥—ã–π –∫–ª–∞—Å—Å –≤ –ø–æ–¥—Ö–æ–¥—è—â–µ–º —Ñ–∞–π–ª–µ
- **–û—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –¥—É–±–ª–∏—Ä–æ–≤–∞–Ω–∏—è**: –£–±—Ä–∞–Ω—ã –∏–∑–±—ã—Ç–æ—á–Ω—ã–µ –ø–æ–ª—è –º–æ–¥–µ–ª–∏

### ‚úÖ –°–æ—Ö—Ä–∞–Ω–µ–Ω–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å:
- –í—Å–µ —Ç–µ—Å—Ç—ã –ø—Ä–æ—Ö–æ–¥—è—Ç
- API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- –§–∏–ª—å—Ç—Ä–∞—Ü–∏—è —Ä–µ—Ü–µ–ø—Ç–æ–≤ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∏—Ä—É–µ—Ç
- –°–≤—è–∑–∏ –º–µ–∂–¥—É –º–æ–¥–µ–ª—è–º–∏ —Å–æ—Ö—Ä–∞–Ω–µ–Ω—ã

---

**–î–∞—Ç–∞ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π**: 01 –∏—é–Ω—è 2025  
**–°—Ç–∞—Ç—É—Å**: ‚úÖ –í—Å–µ –∑–∞–º–µ—á–∞–Ω–∏—è —Ä–µ–≤—å—é –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã  
**–ì–æ—Ç–æ–≤–Ω–æ—Å—Ç—å**: üöÄ –ö–æ–¥ –≥–æ—Ç–æ–≤ –∫ –ø—Ä–æ–¥–∞–∫—à–µ–Ω—É
